<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Vue.js Form</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
</head>
<body>

<div id="app">
    <h1>Vue Test</h1>
    <form @submit.prevent="submitForm">
        <div>
            <label for="input1">ID:</label>
            <input type="text" id="input1" v-model="inputs.input1">
        </div>
        <div>
            <label for="input2">User ID:</label>
            <input type="text" id="input2" v-model="inputs.input2">
        </div>
        <div>
            <label for="input3">Keywords:</label>
            <input type="text" id="input3" v-model="inputs.input3">
        </div>
        <div>
            <label for="input4">Description:</label>
            <input type="text" id="input4" v-model="inputs.input4">
        </div>
        <div>
            <label for="input5">Latitude:</label>
            <input type="text" id="input5" v-model="inputs.input5">
        </div>
        <div>
            <label for="input6">Longitude:</label>
            <input type="text" id="input6" v-model="inputs.input6">
        </div>
        <button type="submit" @click="GetAll">Get Data</button>
        <button type="submit">Submit Data</button>
    </form>
    <div id="container">
    </div>
</div>

<script>
    new Vue({
        el: '#app',
        data: {
            inputs: {
                inputID: '',
                inputUserID: '',
                inputKeywords: '',
                inputDescription: '',
                inputLat: '',
                inputLon: ''
            },
            responseData: null
        },
        
        methods: {
            GetAll() {
                const urlParams = new URLSearchParams(window.location.search)
                const serverURL = (urlParams.get('api') || '').replace(/\/$/, '')

                if (serverURL) {
                    axios.get(`${serverURL}/items`)
                    .then(response => {
                        this.responseData = response.data
                        const container = document.getElementById('container')

                        this.responseData.forEach(item => {
                            const div = document.createElement('div')
                            div.textContent = `Item ID: ${item.id}, Description: ${item.description}`

                            const removeButton = document.createElement('button')
                            removeButton.textContent = 'Remove'
                            removeButton.addEventListener('click', () => {
                                container.removeChild(div)
                            })

                            div.appendChild(removeButton)
                            container.appendChild(div)
                        })

                    })
                    .catch(error => {
                        console.error(error)
                    })
                } else {
                    console.error('Server URL is not specified')
                }
                
            }
        }
    });
</script>

</body>
</html>
